[mysqld]
# ============================================================================
# Configurações para suportar linhas grandes (resolve ERROR 1118)
# ============================================================================
innodb_file_per_table=1
innodb_default_row_format=DYNAMIC
innodb_strict_mode=0

# ============================================================================
# Configurações de página e buffer (baseado no my.ini fornecido)
# ============================================================================
# Tamanho de página InnoDB (64KB permite linhas maiores)
innodb-page-size=65536

# Buffer pool - ajustado para containers (reduzido de 3G para 1G)
# Aumente para 2G ou 3G se o host tiver memória suficiente
innodb_buffer_pool_size=1G

# Tamanho do log de transações
innodb_log_file_size=1G

# Arquivo temporário InnoDB
innodb_temp_data_file_path=ibtmp1:32M:autoextend

# ============================================================================
# Conexões e cache
# ============================================================================
max_connections=2000
max_allowed_packet=1073741824

# Cache de chaves (MyISAM)
key_buffer_size=2048M

# Cache de queries (desabilitado no MariaDB 10.6+, mas mantido para compatibilidade)
query_cache_size=9M
query_cache_type=1

# Cache de tabelas abertas
table_open_cache=2000

# Tamanho de tabelas temporárias
tmp_table_size=2G
max_heap_table_size=2G

# Cache de threads
thread_cache_size=10

# Buffers de ordenação e join
sort_buffer_size=512M
join_buffer_size=2G

# ============================================================================
# Configurações adicionais para importação de dumps grandes
# ============================================================================
bulk_insert_buffer_size=256M
myisam_sort_buffer_size=256M

# Timeout para operações longas
net_read_timeout=600
net_write_timeout=600
wait_timeout=28800
interactive_timeout=28800

[client]
port=3306

